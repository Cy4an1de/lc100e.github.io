<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN"
   "http://www.w3.org/TR/html4/frameset.dtd">
<html>
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<META name="GENERATOR" content="IBM WebSphere Studio Homepage Builder Version 7.0.0.0 for Windows">
<META http-equiv="Content-Style-Type" content="text/css">
<title>Relay</title>

<SCRIPT language="JavaScript" for="window" event="onload">
	
	var pageParam = -1;

	async function document_onload(){
		if( window.location.search != "" ){
			pageParam = getParam(window.location.search, "page");
			path = getParam(window.location.search, "path");
			console.log("page: " + pageParam + " path: " + path);
			await menuFrame.loadXML(path + "pages.xml")
			setPDF( path + pageParam );
			menuFrame.setPageInfo( pageParam, path );
		}
	}

	// document_onload();

	function getPageParam(){ 
		console.log("returning param and path: " + pageParam + " " + path);
		return { pageParam, path };
	}

	function getParam( query, param )
	{
		var val = "";

		var ss=devideParam(query);

		for( var i = 0; i < ss.length; i++ ){
			if( ss[i] == param ){
				if( i < ss.length - 1){
					val = ss[i + 1];
					break;
				}
			}
		}
		return val;

	}

	function devideParam(str)
	{
		var regExp=/&|=/;

		str = str.substr(1);
		return str.split(regExp);
	}


	function getPDFName(){
		console.log("windows url " + window.location.pathname);
		console.log("pdfFrame url " + pdfFrame.location.pathname);
		return pdfFrame.location.pathname;
}

	function setPDF(url){
		pdfFrame.location = url + ".pdf";
		console.log("url: " + + url);
		console.log("origin: " + pdfFrame.origin);
		console.log("location: " + pdfFrame.location);
		console.log("pathname: " + pdfFrame.location.pathname);
		console.log("name: " + pdfFrame.name);
	}

</SCRIPT>

</HEAD>
<frameset rows="30,*" cols="*" framespacing="0" frameborder="0" noresize scrolling="no" onload="document_onload()">
	<frame name="menuFrame" src="menu.html" frameborder="0" noresize scrolling="no"></frame>
  	<frame name="pdfFrame" frameborder="0" noresize scrolling="no"></frame>
</frameset>
</html>
